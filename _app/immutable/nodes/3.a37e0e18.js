import{s as j,n as v}from"../chunks/scheduler.d43faf19.js";import{S as N,i as b,e as k,a as w,f as p,g as u,m as y,s as C,h,j as g,n as P,c as I,k as L,C as m,o as O}from"../chunks/index.fe9cecfd.js";import{g as _}from"../chunks/navigation.4206130a.js";import{c as S}from"../chunks/i18n.d26827e2.js";function E(n){let t,e,s=S("confirm.success")+"",a,i,c,l;return{c(){t=u("section"),e=u("p"),a=y(s),i=C(),c=u("p"),l=y(n[1]),this.h()},l(r){t=h(r,"SECTION",{class:!0});var o=g(t);e=h(o,"P",{});var d=g(e);a=P(d,s),d.forEach(p),i=I(o),c=h(o,"P",{});var f=g(c);l=P(f,n[1]),f.forEach(p),o.forEach(p),this.h()},h(){L(t,"class","svelte-i25dvj")},m(r,o){w(r,t,o),m(t,e),m(e,a),m(t,i),m(t,c),m(c,l)},p(r,o){o&2&&O(l,r[1])},d(r){r&&p(t)}}}function R(n){let t,e=n[0]&&E(n);return{c(){e&&e.c(),t=k()},l(s){e&&e.l(s),t=k()},m(s,a){e&&e.m(s,a),w(s,t,a)},p(s,[a]){s[0]?e?e.p(s,a):(e=E(s),e.c(),e.m(t.parentNode,t)):e&&(e.d(1),e=null)},i:v,o:v,d(s){s&&p(t),e&&e.d(s)}}}function T(n,t,e){const s="https://jerrygreen.deno.dev";let{data:a}=t;if(typeof window<"u"){const r=new URLSearchParams(location.search).get("token")||"";r?fetch(`${s}/confirm?token=${r}`).then(o=>{o.ok||(console.error(`Encountered error: {res.status} ${o.statusText}`),_("/")),o.text().then(d=>{console.info(o.url,d);const f=JSON.parse(d);f.status!=200&&(console.error(`Encountered error (${f.status}): ${f.message}`),_("/"))})}):(console.warn("No token provided, redirecting..."),_("/"))}let i=5,c="";return setInterval(()=>e(2,i-=1),1e3),n.$$set=l=>{"data"in l&&e(0,a=l.data)},n.$$.update=()=>{n.$$.dirty&4&&(i>0?e(1,c=S("confirm.redirect",{waiting:i})):_("/"))},[a,c,i]}class J extends N{constructor(t){super(),b(this,t,T,R,j,{data:0})}}export{J as component};
